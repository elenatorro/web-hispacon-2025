---
import Layout from "@/layouts/Layout.ca.astro";
import { scheduleData } from "../data/schedule";
import { normalizeEvents, formatDuration, getEventTimeDisplay } from "../utils/schedule";
---

<Layout title="HispaCón 2025 - Programa per imprimir">
  <!-- Existing HTML and print styles go here -->
  <!DOCTYPE html>
  <html lang="ca">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HispaCón 2025 - Programa per imprimir</title>
  </head>
  <body>
    <style>
      /* Print-specific styles */
      @media print {
        body {
          font-size: 10pt;
          line-height: 1.3;
          color: black !important;
          background: white !important;
        }
        
        .no-print {
          display: none !important;
        }
        
        .print-page {
          page-break-after: always;
        }
        
        .print-page:last-child {
          page-break-after: avoid;
        }
        
        .schedule-day {
          page-break-inside: avoid;
          margin-bottom: 30px;
        }
        
        .time-slot {
          page-break-inside: avoid;
          margin-bottom: 15px;
          border: 1px solid #ccc;
        }
        
        .event-card {
          page-break-inside: avoid;
          border: 1px solid #ddd;
          margin-bottom: 5px;
        }
      }
    </style>

    <div class="no-print">
      <h1>Programa per imprimir</h1>
      <p>Benvingut al programa de HispaCón 2025. A continuació trobaràs tota la informació sobre els esdeveniments, tallers i activitats programades.</p>
    </div>

    <div class="schedule">
      {scheduleData.map(day => (
        <div class="schedule-day">
          <h2>{day.date}</h2>
          {day.events.map(event => (
            <div class="time-slot">
              <div class="event-time">
                {getEventTimeDisplay(event.startTime, event.endTime)}
              </div>
              <div class="event-details">
                <h3>{event.title}</h3>
                <p>{event.description}</p>
                <p><strong>Durada:</strong> {formatDuration(event.duration)}</p>
              </div>
            </div>
          ))}
        </div>
      ))}
    </div>
  </body>
  </html>
</Layout>
